# Table of Contents

* [FRAME](#frame)
  * [FRAME HEADER](#frame-header)
  * [PRIORITY](#priority-frame)
  * [RST](#rst)
  * [SETTINGS](#settings)
  * [PING](#ping)
  * [GOAWAY](#goaway)
  * [WINDOW_UPDATE](#window_update)
  * [HEADERS](#headers)
  * [RST_STREAM](#rst_stream)
* [STREAM](#stream)
  * [STREAM STATE](#stream-state)

# FRAME

## FRAME HEADER

```
+-----------------------------------------------+
|                   Length (24)                 |
+---------------+---------------+---------------+
|    Type (8)   |   Flags (8)   |
+-+-------------+---------------+---------------+
|R|             Stream Identifier (31)          |
+=+=============================================+
|               Frame Payload (0...)          ...
+-----------------------------------------------+
```

## PRIORITY

```
+-+-------------------------------------------------------------+
|E|                   Stream Dependency (31)                    |
+-+-------------+-----------------------------------------------+
|   Weight (8)  |
+-+-------------+
```

## RST
```
+---------------------------------------------------------------+
|                           Error Code (32)                     |
+---------------------------------------------------------------+
```

## SETTINGS

```
+-------------------------------+
|        Identifier (16)        |
+-------------------------------+-------------------------------+
|                           Value (32)                          |
+---------------------------------------------------------------+
```

## PING

```
+---------------------------------------------------------------+
|                                                               |
|                         Opaque Data (64)                      |
|                                                               |
+---------------------------------------------------------------+
```

## GOAWAY

```
+-+-------------------------------------------------------------+
|R|                     Last-Stream-ID (31)                     |
+-+-------------------------------------------------------------+
|                        Error Code (32)                        |
+---------------------------------------------------------------+
|                      Additional Debug Data (*)                |
+---------------------------------------------------------------+
```

## WINDOW_UPDATE

```
+-+-------------------------------------------------------------+
|R|                     Window Size Increment (31)              |
+-+-------------------------------------------------------------+
```

## HEADERS

```
+---------------+
|Pad Length? (8)|
+-+-------------+-----------------------------------------------+
|E|                     Stream Dependency? (31)                 |
+-+-------------+-----------------------------------------------+
|  Weight? (8)  |
+-+-------------+-----------------------------------------------+
|                       Header Block Fragment (*)             ...
+---------------------------------------------------------------+
|                               Padding (*)                   ...
+---------------------------------------------------------------+
```

## RST_STREAM

```
+---------------------------------------------------------------+
|                           Error Code (32)                     |
+---------------------------------------------------------------+
```

# STREAM

## STREAM STATE

```
                                    +--------+
                          send PP   |        | recv PP
                          ,---------|  idle  |---------.
                         /          |        |          \
                        v           +--------+           v
                  +----------+          |           +----------+
                  |          |          |  send H / |          |
          ,-------| reserved |          |  recv H   | reserved |------.
          |       | (local)  |          |           | (remote) |      |
          |       +----------+          v           +----------+      |
          |             |           +--------+           |            |
          |             |  recv ES  |        |  send ES  |            |
          |      send H |   ,-------|  open  |-------.   | recv H     |
          |             |  /        |        |        \  |            |
          |             v v         +--------+         v v            |
          |   +----------+              |              +----------+   |
          |   |   half   |              |              |   half   |   |
          |   |  closed  |              |     send R / |  closed  |   |
          |   | (remote) |              |     recv R   |  (local) |   |
          |   +----------+              |              +----------+   |
          |        |                    |                   |         |
          |        | send ES /          |         recv ES / |         |
          |        | send R /           v         send R /  |         |
          |        | recv R         +--------+    recv R    |         |
          |send R /‘--------------->|        |<-------------’ send R /|
          |recv R                   | closed |                recv R  |
          ‘------------------------>|        |<-----------------------’
                                    +--------+
```

* send: endpoint sends this frame 
* recv: endpoint receives this frame
* H: HEADERS frame (with implied CONTINUATIONs)
* PP: PUSH_PROMISE frame (with implied CONTINUATIONs)
* ES: END_STREAM flag
* R: RST_STREAM frame
